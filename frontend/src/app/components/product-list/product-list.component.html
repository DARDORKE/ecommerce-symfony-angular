<div class="container">
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="text-center mb-4">Nos Produits</h1>
    </div>
  </div>

  <!-- Filters -->
  <div class="row mb-4">
    <div class="col-md-6">
      <mat-form-field class="w-100">
        <mat-label>Rechercher</mat-label>
        <input matInput [(ngModel)]="searchTerm" (keyup.enter)="onSearch()" placeholder="Rechercher un produit...">
        <mat-icon matSuffix (click)="onSearch()" style="cursor: pointer;">search</mat-icon>
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field class="w-100">
        <mat-label>Catégorie</mat-label>
        <mat-select [(value)]="selectedCategory" (selectionChange)="onCategoryChange($event.value)">
          <mat-option value="">Toutes les catégories</mat-option>
          <mat-option *ngFor="let category of categories$ | async" [value]="category">
            {{ category }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="col-md-2">
      <button mat-raised-button color="accent" (click)="clearFilters()" class="w-100">
        Effacer
      </button>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-spinner">
    <mat-spinner></mat-spinner>
  </div>

  <!-- Products Grid -->
  <div class="row" *ngIf="!loading">
    <div class="col-lg-3 col-md-4 col-sm-6 mb-4" *ngFor="let product of products$ | async">
      <app-product-card [product]="product"></app-product-card>
    </div>
  </div>

  <!-- No products message -->
  <div *ngIf="(products$ | async)?.length === 0 && !loading" class="text-center py-5">
    <mat-icon style="font-size: 4rem; height: 4rem; width: 4rem; color: #ccc;">search_off</mat-icon>
    <h3 class="mt-3 text-muted">Aucun produit trouvé</h3>
    <p class="text-muted">Essayez de modifier vos critères de recherche</p>
  </div>
</div>